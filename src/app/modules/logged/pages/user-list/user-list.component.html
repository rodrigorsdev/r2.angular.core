<div class="page-container container-fluid" [class.dark-theme]="themeService.isDarkMode()">

  <div class="page-header d-flex justify-content-between align-items-center mb-4">
    <div>
      <h1 class="page-title mb-0">
        <i class="bi bi-people-fill me-2"></i>Usuários
      </h1>
      <p class="page-subtitle text-muted mb-0">Gerencie os usuários do sistema</p>
    </div>
    <div class="page-actions">
      <button class="btn btn-primary btn-hover-glow" (click)="openCreateModal()">
        <i class="bi bi-plus-lg me-2"></i>Novo
      </button>
    </div>
  </div>

  <div class="page-content">
    <div class="card">
      <div class="card-body">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Nome</th>
                <th>Email</th>
                <th>Data Nascimento</th>
                <th>Ações</th>
              </tr>
            </thead>
            <tbody>
              @for (item of list; track $index) {
              <tr>
                <td>{{ item.name }}</td>
                <td>{{ item.email }}</td>
                <td>{{ item.birthDate | dateFormat }}</td>
                <td>
                  <div class="d-flex gap-2">
                    <button class="btn btn-sm btn-icon" (click)="openEditModal(item)" title="Editar">
                      <i class="bi bi-pencil text-primary"></i>
                    </button>
                    <button class="btn btn-sm btn-icon" (click)="confirmDelete(item.id)" title="Excluir">
                      <i class="bi bi-trash text-danger"></i>
                    </button>
                  </div>
                </td>
              </tr>
              }

              @if(list.length === 0){
              <tr>
                <td colspan="4" class="text-center">Nenhum usuário cadastrado</td>
              </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Modal de Cadastro/Edição -->
@if(showModal){
<app-user-form-modal [data]="selected" (close)="handleModalClose($event)">
</app-user-form-modal>
}

<!-- Modal de Confirmação -->
@if(showConfirmDialog){
<app-confirm-dialog title="Confirmar Exclusão" message="Tem certeza que deseja excluir este usuário?"
  (confirm)="deleteUser()" (cancel)="showConfirmDialog = false">
</app-confirm-dialog>
}